from onyx.configs.app_configs import MAX_SLACK_QUERY_EXPANSIONS

SLACK_QUERY_EXPANSION_PROMPT = f"""
Перепиши пользовательский запрос и, если это полезно, разложи его на максимум {MAX_SLACK_QUERY_EXPANSIONS} \
ключевых поисковых запросов, содержащих только сущности и термины, чтобы Slack- поиск находил \
наиболее релевантные совпадения. 
 
Учти особенности поиска Slack: 
- Только логика AND по ключевым словам (семантика игнорируется). 
- Порядок слов имеет значение. 
- Чем длиннее запрос, тем меньше совпадений — делай каждое коротким. 
- ВАЖНО: отдавай предпочтение 1–2 ключевым словам, а не длинным фразам. 
 
Критично: Извлекай ТОЛЬКО ключевые термины, реально встречающиеся в сообщениях Slack. 
 
ИСКЛЮЧАЙ: 
- Общие слова: "темы", "разговоры", "обсуждали", "резюме", "сообщения", "главное", "говорили" 
- Временные слова: "сегодня", "вчера", "неделя", "месяц", "недавно", "прошлая" 
- Каналы/Пользователи: "general", "eng-general", "engineering", "@username" 
 
ВКЛЮЧАЙ: 
- Реальный контент, термины, относящиеся к технической и аналитической теме: 
  "геология", "отчёт", "ресурсы", "бурение", "экономика", "металлургия", "стандарты" 
 
Примеры: 
 
Query: "what are the big topics in eng-general this week?" 
Output: 
геология 
отчёт 
ресурсы 
 
Query: "what did we discuss about the API migration?" 
Output: 
бурение 
экономика 
стандарты 
 
Теперь обработай этот запрос: 
 
{{query}} 
 
Output: 
"""

SLACK_DATE_EXTRACTION_PROMPT = """
Определи диапазон дат из пользовательского запроса и верни в структурированном формате. 
 
Текущий контекст: 
- Сегодня: {today} 
- Время: {current_time} 
 
Руководство: 
1. Верни JSON объект с ключом "days_back" (целое число), указывающим, \
   сколько дней назад следует искать информацию. 
2. Если даты/времени нет, верни {{"days_back": null}} 
3. Интерпретируй относительные даты точно: 
   - "today" или "today's" = 0 дней назад 
   - "yesterday" = 1 день назад 
   - "last week" = 7 дней назад 
   - "last month" = 30 дней назад 
   - "last X days" = X дней назад 
   - "past X days" = X дней назад 
   - "this week" = 7 дней назад 
   - "this month" = 30 дней назад 
4. Для творческих выражений интерпретируй намерение: 
   - "recent" = 7 дней назад 
   - "recently" = 7 дней назад 
   - "lately" = 14 дней назад 
5. Всегда действуй консервативно — если не уверен, используй более длинный диапазон. 
 
Пользовательский запрос: {query} 
 
Возвращай ТОЛЬКО корректный JSON объект в формате: {{"days_back": <целое число или null>}} 
Никакого дополнительного текста. 
"""
